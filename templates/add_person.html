<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–±–∞–≤–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ - –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-left">
            <a href="/" class="nav-button">
                <span>üè†</span>
                –ì–ª–∞–≤–Ω–∞—è
            </a>
            <a href="/add" class="nav-button active">
                <span>‚ûï</span>
                –î–æ–±–∞–≤–∏—Ç—å
            </a>
            <a href="/database" class="nav-button">
                <span>üóÑÔ∏è</span>
                –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
            </a>
            <a href="/users" class="nav-button">
                <span>üë•</span>
                –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
            </a>
        </div>
        <div class="nav-right">
            <a href="/profile" class="nav-button">
                <span>üë§</span>
                –ü—Ä–æ—Ñ–∏–ª—å
            </a>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span id="theme-icon">üåô</span>
            </button>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>–î–æ–±–∞–≤–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö</h1>
            <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏ —É–∫–∞–∂–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–µ–ª–æ–≤–µ–∫–µ</p>
        </div>

        {% if error %}
        <div class="alert alert-error">
            {{ error }}
        </div>
        {% endif %}

        <div class="form-container">
            <form class="add-person-form" action="/add" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="name">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è:</label>
                    <input type="text" id="name" name="name" class="form-input" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –∏–º—è">
                </div>

                <div class="form-group">
                    <label for="gender">–ü–æ–ª:</label>
                    <select id="gender" name="gender" class="form-select" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª</option>
                        <option value="–º—É–∂—Å–∫–æ–π">–ú—É–∂—Å–∫–æ–π</option>
                        <option value="–∂–µ–Ω—Å–∫–∏–π">–ñ–µ–Ω—Å–∫–∏–π</option>
                        <option value="–Ω–µ —É–∫–∞–∑–∞–Ω–æ">–ù–µ —É–∫–∞–∑–∞–Ω–æ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="file">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è:</label>
                    <div class="file-upload-area" id="file-upload-area">
                        <input type="file" id="file" name="file" class="form-input file-input" accept="image/*" required>
                        <div class="file-upload-text">
                            <span class="upload-icon">üì∑</span>
                            <p>–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ —Å—é–¥–∞</p>
                            <small>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, MOV, MP4 –∏ –¥—Ä—É–≥–∏–µ</small>
                        </div>
                    </div>
                    <div id="file-preview" class="file-preview"></div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="submit-btn">–î–æ–±–∞–≤–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞</button>
                    <a href="/" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/script.js"></script>
    <script>
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
        const fileInput = document.getElementById('file');
        const fileUploadArea = document.getElementById('file-upload-area');
        const filePreview = document.getElementById('file-preview');

        fileInput.addEventListener('change', handleFileSelect);
        fileUploadArea.addEventListener('dragover', handleDragOver);
        fileUploadArea.addEventListener('drop', handleDrop);

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                showFilePreview(file);
            }
        }

        function handleDragOver(e) {
            e.preventDefault();
            fileUploadArea.classList.add('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            fileUploadArea.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                showFilePreview(files[0]);
            }
        }

        function showFilePreview(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                filePreview.innerHTML = `
                    <img src="${e.target.result}" alt="–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä">
                    <p>${file.name}</p>
                `;
                filePreview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>
